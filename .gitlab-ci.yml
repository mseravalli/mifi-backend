stages:
- build
- lint
- test
- package
- deploy

cache:
  untracked: true
  key: mifi-backend
  paths:
  - target/

build:
  stage: build
  image: java:jdk-alpine
  script:
  - apk add --no-cache bash
  - bash activator clean
  - bash activator compile
  - bash activator dist

lint:
  stage: lint
  image: alpine
  script:
  - echo "TODO"

test:
  stage: test
  image: alpine
  script:
  - echo "TODO"
   #  - sbt clean
   # - sbt test
   # - sbt coverage test coverageReport

package:
  stage: package
  tags:
  - docker
  image: docker:latest
  script:
    - docker build -t mseravalli/mifi-backend:latest .

deploy:
  stage: deploy
  image: alpine
  script:
  - echo "TODO"

